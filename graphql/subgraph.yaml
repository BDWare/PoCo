specVersion: 0.0.1
description: iExecPoCoV3
repository: https://github.com/iExecBlockchainComputing/PoCo-dev
schema:
  file: ./schema.graphql
dataSources:
# ================================= IexecHub ==================================
  - kind: ethereum/contract
    name: IexecHub
    network: mainnet
    source:
      address: '0x1383c16c927c4A853684d1a9c676986f25E22111'
      abi: IexecHub
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Category
      abis:
        - name: IexecHub
          file: ../build/contracts/IexecHub.json
        - name: CategoryManager
          file: ../build/contracts/CategoryManager.json
      eventHandlers:
        - event: CreateCategory(uint256,string,string,uint256)
          handler: handleCreateCategory
      file: ./src/IexecHub
# ================================ IexecClerk =================================
  - kind: ethereum/contract
    name: IexecClerk
    network: mainnet
    source:
      address: '0x3780d894DB2cB84135bBa025ba9ef0Ac518DC311'
      abi: IexecClerk
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Account
        - Task
        - Deposit
        - Withdraw
        - Reward
        - Seize
        - Lock
        - Unlock
      abis:
        - name: IexecClerk
          file: ../build/contracts/IexecClerk.json
        - name: Escrow
          file: ../build/contracts/Escrow.json
      eventHandlers:
        - event: Deposit(address,uint256)
          handler: handleDeposit
        - event: DepositFor(address,uint256,address)
          handler: handleDepositFor
        - event: Withdraw(address,uint256)
          handler: handleWithdraw
        - event: Reward(address,uint256,bytes32)
          handler: handleReward
        - event: Seize(address,uint256,bytes32)
          handler: handleSeize
        - event: Lock(address,uint256)
          handler: handleLock
        - event: Unlock(address,uint256)
          handler: handleUnlock
      file: ./src/IexecClerk
# =============================== App registry ================================
  - kind: ethereum/contract
    name: AppRegistry
    network: mainnet
    source:
      address: '0x3322D449A43E01178672A5FBEA9E7aF3b8c7bB29'
      abi: AppRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - App
      abis:
        - name: App
          file: ../build/contracts/App.json
        - name: AppRegistry
          file: ../build/contracts/AppRegistry.json
      eventHandlers:
        - event: CreateApp(indexed address,address)
          handler: handleCreateApp
      file: ./src/registries
# ============================= Dataset registry ==============================
  - kind: ethereum/contract
    name: DatasetRegistry
    network: mainnet
    source:
      address: '0xC28F63b8379087F02E09da1BC62148874E730Ffd'
      abi: DatasetRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Dataset
      abis:
        - name: Dataset
          file: ../build/contracts/Dataset.json
        - name: DatasetRegistry
          file: ../build/contracts/DatasetRegistry.json
      eventHandlers:
        - event: CreateDataset(indexed address,address)
          handler: handleCreateDataset
      file: ./src/registries
# ============================ Workerpool registry ============================
  - kind: ethereum/contract
    name: WorkerpoolRegistry
    network: mainnet
    source:
      address: '0xc398052563469e6Ea7C442aBf124aADE7ec2CC92'
      abi: WorkerpoolRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Workerpool
      abis:
        - name: Workerpool
          file: ../build/contracts/Workerpool.json
        - name: WorkerpoolRegistry
          file: ../build/contracts/WorkerpoolRegistry.json
      eventHandlers:
        - event: CreateWorkerpool(indexed address,indexed address,string)
          handler: handleCreateWorkerpool
      file: ./src/registries
# ================================ Workerpool =================================
  - kind: ethereum/contract
    name: Workerpool
    network: mainnet
    source:
      abi: Workerpool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Workerpool
        - PolicyChange
      abis:
        - name: Workerpool
          file: ../build/contracts/Workerpool.json
      eventHandlers:
        - event: PolicyUpdate(uint256,uint256,uint256,uint256)
          handler: handlePolicyUpdate
      file: ./src/registries
